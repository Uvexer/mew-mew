# Formula Hub - iOS приложение для изучения формул

## Описание проекта

Formula Hub - это образовательное iOS-приложение для изучения формул по математике, физике и химии. Приложение позволяет пользователям:

- Просматривать формулы по категориям (Математика, Физика, Химия)
- Отмечать изученные формулы и отслеживать прогресс
- Искать формулы по названию, тексту или описанию
- Использовать встроенный калькулятор для вычислений
- Просматривать подробную информацию о каждой формуле, включая описание и переменные

## Технические характеристики

- **Язык программирования:** Swift
- **UI Framework:** SwiftUI
- **Минимальная версия iOS:** 16.0
- **Архитектура:** MVVM (Model-View-ViewModel)
- **Хранение данных:** Core Data
- **Асинхронность:** async/await
- **Логирование:** os.Logger

## Структура проекта

```
timeAppFive/
├── Models/
│   ├── CoreData/
│   │   ├── CoreDataStack.swift          # Настройка Core Data
│   │   ├── CategoryEntity+CoreDataClass.swift
│   │   └── FormulaEntity+CoreDataClass.swift
│   └── Domain/
│       ├── CategoryModel.swift          # Модель категории
│       └── FormulaModel.swift           # Модель формулы
├── Services/
│   ├── CategoryService.swift           # Сервис для работы с категориями
│   ├── FormulaService.swift            # Сервис для работы с формулами
│   └── DataInitializationService.swift # Инициализация данных
├── ViewModels/
│   ├── MainViewModel.swift             # ViewModel главного экрана
│   ├── CategoryDetailViewModel.swift   # ViewModel экрана категории
│   ├── SearchViewModel.swift           # ViewModel поиска
│   └── CalculatorViewModel.swift       # ViewModel калькулятора
├── Views/
│   ├── MainView.swift                  # Главный экран с TabView
│   ├── CategoryDetailView.swift        # Экран списка формул категории
│   ├── FormulaDetailView.swift         # Детальный экран формулы
│   ├── SearchView.swift                # Экран поиска
│   ├── CalculatorView.swift            # Экран калькулятора
│   └── Components/
│       ├── CategoryCardView.swift      # Карточка категории
│       ├── ProgressHeaderView.swift    # Заголовок с прогрессом
│       └── FormulaRowView.swift        # Строка формулы в списке
├── FormulaDataModel.xcdatamodeld/      # Core Data модель
└── timeAppFiveApp.swift                # Точка входа приложения
```

## Архитектура MVVM

### Models (Модели)
- **Domain Models:** `CategoryModel`, `FormulaModel` - чистые Swift структуры для представления данных в UI
- **Core Data Entities:** `CategoryEntity`, `FormulaEntity` - сущности для хранения в базе данных

### Views (Представления)
- **MainView:** Главный контейнер с TabView (Главная, Поиск, Калькулятор)
- **CategoryDetailView:** Список формул выбранной категории
- **FormulaDetailView:** Подробная информация о формуле
- **SearchView:** Поиск формул по всей базе
- **CalculatorView:** Встроенный калькулятор для вычислений

### ViewModels (Модели представления)
- Управляют состоянием UI
- Взаимодействуют с сервисами
- Обрабатывают бизнес-логику
- Используют @Published для реактивного обновления UI

### Services (Сервисы)
- **CategoryService:** CRUD операции с категориями
- **FormulaService:** CRUD операции с формулами, поиск
- **DataInitializationService:** Инициализация начальных данных

## Core Data

### Структура данных

**CategoryEntity:**
- `id: UUID` - уникальный идентификатор
- `name: String` - название категории (Математика, Физика, Химия)
- `iconName: String` - имя системной иконки SF Symbols
- `colorHex: String` - цвет категории в HEX формате
- `orderIndex: Int16` - порядок сортировки
- `formulas: NSSet?` - связь один-ко-многим с формулами

**FormulaEntity:**
- `id: UUID` - уникальный идентификатор
- `name: String` - название формулы
- `formulaText: String` - текст формулы
- `descriptionText: String` - описание формулы
- `variables: String?` - переменные через запятую
- `isLearned: Bool` - флаг изученности
- `orderIndex: Int16` - порядок сортировки
- `createdAt: Date` - дата создания
- `lastViewedAt: Date?` - дата последнего просмотра
- `category: CategoryEntity?` - связь многие-к-одному с категорией

### Core Data Stack

`CoreDataStack` реализован как singleton и предоставляет:
- `NSPersistentContainer` для управления хранилищем
- `viewContext` для операций на главном потоке
- `save()` метод для сохранения изменений
- `performBackgroundTask()` для фоновых операций

### Инициализация данных

При первом запуске приложения `DataInitializationService` создает:
- 3 категории: Математика, Физика, Химия
- По 5 популярных формул в каждой категории
- Все данные хранятся в Core Data и сохраняются между запусками

## Основная функциональность

### 1. Просмотр формул по категориям
- Главный экран показывает 3 категории с прогрессом изучения
- При выборе категории открывается список всех формул
- Каждая формула имеет название, текст формулы и чекбокс для отметки изученности

### 2. Детальный просмотр формулы
- Полный текст формулы с крупным шрифтом
- Описание назначения формулы
- Список переменных с их обозначениями
- Статус изучения и даты создания/просмотра

### 3. Поиск формул
- Полнотекстовый поиск по названию, тексту формулы и описанию
- Поиск с задержкой (debounce) 300мс для оптимизации
- Результаты обновляются в реальном времени
- Поддержка регистронезависимого поиска

### 4. Калькулятор
- Встроенный калькулятор для вычислений
- Базовые операции: +, -, ×, ÷
- Дополнительные функции: %, ±, десятичные числа
- Адаптивный размер шрифта дисплея

### 5. Отслеживание прогресса
- Общий прогресс на главном экране
- Прогресс по каждой категории
- Счетчики изученных и оставшихся формул
- Визуальные индикаторы прогресса (круговые и линейные)

## Адаптивный дизайн

### Поддержка устройств
- iPhone SE и выше
- iPad (поддержка Split View)
- Портретная и альбомная ориентация

### Адаптивность UI
- Все размеры рассчитываются через GeometryReader
- Относительные размеры шрифтов и отступов
- Динамическая компоновка элементов
- FlowLayout для переменных формул

### Темы
- Полная поддержка Light и Dark режимов
- Использование системных цветов SwiftUI
- Автоматическая адаптация к настройкам системы

## Производительность и стабильность

### Оптимизация
- LazyVStack для экономии памяти при больших списках
- Дебаунсинг поиска для снижения нагрузки
- Правильное использование @Published и @ObservedObject
- Отсутствие лишних перерисовок body

### Асинхронность
- Все операции с Core Data через async/await
- @MainActor для операций на главном потоке
- Task с поддержкой отмены для поиска

### Обработка ошибок
- Все ошибки логируются через os.Logger
- Мягкая обработка без fatalError
- Отображение понятных сообщений пользователю
- Безопасные fallback-значения

## Логирование

Используется `os.Logger` для категорий:
- App - события жизненного цикла приложения
- CoreData - операции с базой данных
- CategoryService - операции с категориями
- FormulaService - операции с формулами
- MainViewModel, CategoryDetailViewModel, SearchViewModel - события UI

Логируются только системные события, без персональных данных.

## Запуск проекта

1. Откройте `timeAppFive.xcodeproj` в Xcode 15+
2. Выберите целевое устройство (iPhone/iPad симулятор или физическое устройство)
3. Нажмите Cmd+R для сборки и запуска
4. При первом запуске автоматически создастся база данных с тестовыми формулами

## Требования для сборки

- Xcode 15.0+
- macOS Sonoma 14.0+
- iOS 16.0+ SDK

## Готовность к App Store

Проект готов к:
- Сборке для Production
- Загрузке в TestFlight
- Отправке на ревью в App Store

Необходимо добавить:
- Privacy Policy URL (если требуется)
- App Store иконку 1024x1024
- Скриншоты для разных устройств
- Описание и ключевые слова для App Store

## Возможные улучшения

1. Добавление пользовательских формул
2. Категории по темам/разделам
3. Экспорт/импорт формул
4. Виджеты для главного экрана
5. Интерактивные калькуляторы для конкретных формул
6. Система заметок к формулам
7. Режим карточек для запоминания
8. Статистика изучения по дням/неделям
9. iCloud синхронизация
10. Локализация на другие языки

## Лицензия

Проект готов для коммерческого использования и публикации в App Store.

---

**Разработано:** 2026
**Платформа:** iOS 16.0+
**Архитектура:** MVVM + Core Data

