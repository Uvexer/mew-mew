# Time Tracker - iOS приложение для отслеживания рабочего времени

## Описание проекта

Time Tracker - это профессиональное iOS-приложение для учёта рабочего времени, разработанное на Swift с использованием SwiftUI. Приложение позволяет создавать проекты, отслеживать время работы над ними, просматривать историю записей и анализировать статистику.

**Основные возможности:**
- Создание и управление проектами с цветовой маркировкой
- Запуск и остановка таймера для отслеживания времени
- Просмотр истории временных записей по датам
- Статистика по всем проектам
- Редактирование записей и проектов
- Автоматическое сохранение всех данных локально

## Технические характеристики

- **Язык:** Swift 5.0
- **Фреймворк:** SwiftUI
- **Минимальная версия iOS:** 16.0
- **Архитектура:** MVVM (Model-View-ViewModel)
- **Хранилище данных:** Core Data
- **Асинхронность:** async/await
- **Платформы:** iPhone (портретная ориентация), iPad (все ориентации)

## Архитектура приложения

### Структура проекта

```
workAppSix/
├── Models/
│   └── Models.swift                    # Модели данных (Project, TimeEntry, ProjectStatistics)
├── ViewModels/
│   ├── ProjectsViewModel.swift         # Логика управления проектами
│   ├── TimerViewModel.swift            # Логика таймера
│   └── EntriesViewModel.swift          # Логика записей и статистики
├── Views/
│   ├── Components/
│   │   ├── ProjectCard.swift           # Карточка проекта
│   │   ├── TimeEntryCard.swift         # Карточка временной записи
│   │   ├── ColorPicker.swift           # Компонент выбора цвета
│   │   ├── ActiveTimerBanner.swift     # Баннер активного таймера
│   │   └── StatisticsCard.swift        # Карточка статистики
│   └── Screens/
│       ├── MainTabView.swift           # Главный TabView контейнер
│       ├── TimerView.swift             # Экран таймера
│       ├── ProjectsView.swift          # Экран проектов
│       ├── EntriesView.swift           # Экран записей
│       └── StatisticsView.swift        # Экран статистики
├── Services/
│   └── CoreDataService.swift           # Сервис работы с Core Data
├── Utilities/
│   └── Extensions.swift                # Расширения и вспомогательные функции
├── TimeTracker.xcdatamodeld/           # Модель данных Core Data
└── workAppSixApp.swift                 # Точка входа приложения
```

### Архитектурные принципы

**MVVM (Model-View-ViewModel):**
- **Model** - структуры данных (Project, TimeEntry) и Core Data entities
- **View** - SwiftUI компоненты, отображающие состояние без бизнес-логики
- **ViewModel** - управление состоянием и взаимодействие с сервисами

**Разделение ответственности:**
- View не содержит вычислений и логики, только отображение
- ViewModel управляет состоянием и обрабатывает пользовательские действия
- CoreDataService инкапсулирует всю работу с базой данных
- Зависимости передаются через инициализаторы (Dependency Injection)

## Core Data

### Модель данных

**ProjectEntity:**
- `id: UUID` - уникальный идентификатор
- `name: String` - название проекта
- `colorHex: String` - цвет проекта в hex формате
- `createdAt: Date` - дата создания
- `timeEntries: [TimeEntryEntity]` - связь с записями времени (cascade delete)

**TimeEntryEntity:**
- `id: UUID` - уникальный идентификатор
- `startDate: Date` - время начала
- `endDate: Date?` - время окончания (nil для активного таймера)
- `notes: String?` - заметки
- `project: ProjectEntity` - связь с проектом

### CoreDataService

Центральный сервис для работы с Core Data, инкапсулирующий все операции с базой данных:

**Основные методы:**
- `createProject(name:colorHex:)` - создание проекта
- `updateProject(_:name:colorHex:)` - обновление проекта
- `deleteProject(_:)` - удаление проекта
- `startTimeEntry(for:notes:)` - запуск таймера
- `stopTimeEntry(_:)` - остановка таймера
- `updateTimeEntry(_:startDate:endDate:notes:)` - редактирование записи
- `deleteTimeEntry(_:)` - удаление записи
- `fetchProjects()` - получение всех проектов
- `fetchTimeEntries(for:from:to:)` - получение записей с фильтрацией
- `fetchActiveTimeEntry()` - получение активной записи

**Особенности:**
- Все операции изменения данных помечены `@MainActor` для безопасности потоков
- Автоматическое логирование через `os.Logger`
- Безопасная обработка ошибок без использования `fatalError`
- Merge policy для разрешения конфликтов

## Основные экраны

### 1. Timer (Таймер)
- Запуск/остановка таймера для выбранного проекта
- Отображение активного таймера с elapsed time
- Быстрый запуск по проектам
- Добавление заметок к записи

### 2. Entries (Записи)
- Календарь для выбора даты
- Список записей за выбранный день
- Общая статистика за день
- Редактирование и удаление записей

### 3. Projects (Проекты)
- Список всех проектов
- Создание новых проектов
- Редактирование проектов (название, цвет)
- Удаление проектов

### 4. Statistics (Статистика)
- Общее отслеженное время
- Количество всех записей
- Детальная статистика по каждому проекту
- Сортировка по времени (от большего к меньшему)

## Адаптивность и доступность

### Адаптивный интерфейс
- Использование `GeometryReader` для динамического расчёта размеров
- Поддержка различных размеров экранов (iPhone SE, большие iPhone, iPad)
- Корректная работа в портретной и альбомной ориентации
- Поддержка Split View на iPad
- Адаптивные отступы и размеры шрифтов

### Темы
- Полная поддержка светлой и тёмной темы
- Использование семантических цветов SwiftUI
- Автоматическая адаптация всех компонентов

## Особенности реализации

### Производительность
- Минимизация перерисовок через правильное использование `@Published` и `@StateObject`
- Эффективные запросы к Core Data с использованием предикатов
- Lazy загрузка списков (`LazyVStack`)
- Оптимизированная работа с Timer через weak self

### Безопасность и стабильность
- Отсутствие крэшей и необработанных исключений
- Корректная обработка всех ошибочных состояний
- Валидация пользовательского ввода
- Безопасная работа с опциональными значениями

### Логирование
- Использование `os.Logger` для системного логирования
- Логирование важных действий пользователя
- Логирование операций с базой данных
- Отсутствие логирования чувствительных данных

## Инструкция по запуску

### Требования
- macOS с установленным Xcode 15.0 или выше
- iOS Simulator или физическое устройство с iOS 16.0+

### Шаги для запуска

1. **Открытие проекта:**
   - Откройте файл `workAppSix.xcodeproj` в Xcode
   - Дождитесь индексации проекта

2. **Выбор целевого устройства:**
   - В верхней панели Xcode выберите симулятор или подключенное устройство
   - Рекомендуется: iPhone 15 Pro или новее

3. **Сборка и запуск:**
   - Нажмите `Cmd + R` или кнопку "Play" в Xcode
   - Приложение автоматически соберётся и запустится

4. **Первый запуск:**
   - При первом запуске база данных Core Data будет создана автоматически
   - Создайте несколько проектов через вкладку "Projects"
   - Запустите таймер через вкладку "Timer"

### Тестирование

**Основные сценарии для тестирования:**
1. Создание проекта с различными цветами
2. Запуск и остановка таймера
3. Просмотр записей за различные даты
4. Редактирование существующих записей
5. Проверка статистики
6. Удаление проектов и записей
7. Переключение между светлой и тёмной темой
8. Поворот экрана (на iPad)

## Подготовка к App Store Connect

### Текущее состояние
Проект готов к сборке и содержит все необходимые компоненты:
- ✅ Настроен Bundle Identifier: `sdsd.workAppSix`
- ✅ Установлена минимальная версия iOS 16.0
- ✅ Настроены ориентации экрана
- ✅ Включена генерация Info.plist

### Перед отправкой в App Store Connect

1. **Обновите Bundle Identifier:**
   - Измените на уникальный идентификатор вашей команды
   - В проекте: Target → General → Bundle Identifier

2. **Настройте Team:**
   - Выберите правильную команду разработчика
   - Target → Signing & Capabilities

3. **Добавьте иконку приложения:**
   - Подготовьте иконку в размерах: 1024x1024, 180x180, 120x120, 87x87, 80x80, 76x76, 60x60, 58x58, 40x40, 29x29, 20x20
   - Добавьте в Assets.xcassets/AppIcon.appiconset

4. **Добавьте описания для Privacy:**
   - Приложение не требует специальных разрешений
   - Все данные хранятся локально

5. **Версионирование:**
   - Обновите версию в Marketing Version
   - Обновите Build Number

6. **Архивирование:**
   - Product → Archive
   - Validate App
   - Distribute App

## Возможные улучшения

- Экспорт данных в CSV/PDF
- iCloud синхронизация
- Виджеты для быстрого доступа
- Apple Watch companion app
- Графики и диаграммы статистики
- Напоминания и уведомления
- Теги для записей
- Цели по времени работы
- Темная иконка для тёмной темы

## Техническая поддержка

При возникновении проблем проверьте:
- Версию Xcode (требуется 15.0+)
- Корректность Bundle Identifier
- Наличие всех файлов проекта
- Логи в консоли Xcode для диагностики

## Лицензия

Проект готов к коммерческому использованию и загрузке в App Store.

